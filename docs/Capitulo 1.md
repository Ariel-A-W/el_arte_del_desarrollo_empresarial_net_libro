# **El Arte del Desarrollo Empresarial con Microsoft .NET Core**

# Cap√≠tulo 1

## Introducci√≥n

En el actual mundo moderno en el que vivimos, los entornos empresariales se est√°n convirtiendo cada vez m√°s en altamente competitivos. La moderna tecnolog√≠a est√° jugando un rol fundamental en este gran proceso de transformaci√≥n que estamos experimentando. Este proceso de transformaci√≥n impacta muy significativamente sobre diversas √°reas tales como los entornos industriales, comerciales, medicinales, sociales, etc. El objetivo final es lograr un modelo m√°s expandido de automatizaci√≥n y de escala, a los efectos de que puedan ofrecer mejores y excelente soluciones pr√°cticas.

Las diversas soluciones que nos ofrece Microsoft .NET Core, hacen que todos estos enfoques puedan instrumentarse conveniente y adecuadamente. El enfoque que propone Microsoft .NET Core es la de disponer de una arquitectura modular, bas√°ndose sobre una multiplataforma y garantizando un rendimiento superior, en comparaci√≥n a otras tecnolog√≠as m√°s antiguas y de terceros. Todo este compendio de tecnolog√≠as propuestas por Microsoft .NET Core permiten la creaci√≥n de aplicaciones y servicios m√°s robustas y escalables. A todo ello sumado la AI (Artificial Intelligense) o inteligencia artificial, podremos lograr importantes avances resolutivos a muchos de los desaf√≠os modernos.

Adem√°s de todo este despliegue y sus detalles de estas tecnolog√≠as, tambi√©n resulta necesario realizar un debido y acertado enfoque en materia de desarrollo, soluci√≥n e implementaci√≥n de todas estas herramientas disponibles de forma eficaz en el mundo industrial y empresarial. 
El objetivo de este libro es, no solamente ahondar en temas de tecnolog√≠as y sus potenciales aplicaciones, sino tambi√©n, hacer √©nfasis eficazmente en el contexto general del mundo empresarial e industrial, de modo tal de encontrar soluciones pr√°cticas y adecuadas para todos estos campos de acci√≥n.

Este libro proporciona una gu√≠a detallada para incurrir en diversos asuntos t√©cnicos que nos permiten describir algunos escenarios resolutivos posibles para potenciales casos reales de nuestra vida cotidiana. Este libro les permite a los profesionales poder instrumentar de forma apropiada todas aquellas habilidades necesarias, bas√°ndose sobre un marco de soluciones avanzadas con el objeto de construir soluciones robustas, mejoras, reduciendo los costos y el tiempo en el desarrollo, prueba y los despliegues de los sistemas a producci√≥n.

Adem√°s de todos estos puntos clave, tambi√©n se incluye todo un conjunto de estrategias espec√≠ficas y particulares para la obtenci√≥n de un enfoque m√°s flexible, amigable, pr√°ctico, con el objeto de enfrentar grandes desaf√≠os reales en futuros proyectos empresariales.

## Arquitecturas Avanzadas y Patrones de Dise√±o

Las arquitecturas modernas nos permiten dise√±ar sistemas m√°s robustos, claros, ordenados y escalables. Las arquitecturas plantean como base el uso de patrones estandarizados. Gracias a los patrones, tanto el dise√±o y como la construcci√≥n del software, bajo todos sus procesos, resultan ser m√°s s√≥lidos y seguros. En resumen, todos ellos, resultan esenciales precisamente sobre ambientes empresariales e industriales.

Una arquitectura puede basarse en varios prototipos, con el objeto de resolver diversos problemas generalizados de escala, mantenimiento, rendimiento, etc. Podemos contar con las arquitecturas tales como HA (Hexagonal Architecture) o Arquitectura Hexagonal, CA (*Clean Architecture*) o Arquitectura Limpia y con DDD *(Domain-Driven Design*) o Dise√±o Basado en Dominios.

Por otro lado, tambi√©n se propone el uso de una arquitectura de plataforma para cubrir los servicios en los IIS (Internet Information Services) o en servidores m√°s robustos, incluyendo las nubes como Microsoft Azure Cloud, de modo tal de poder disponer de un modelo basado en microservicios y sumado a este, el patr√≥n CQRS (*Command Query Responsability Segregation*), que nos ofrecen un modelo funcional y operativo muy robusto. Adem√°s del patr√≥n CQRS, tambi√©n contamos con el patr√≥n Event Sourcing. Ambos patrones permiten crear aplicaciones altamente escalables y resilientes.

En resumen, todos ellos contribuyen a modelar el software m√°s cercano al negocio, permiti√©ndole de esta forma diversos tipos de cambios muy r√°pidos al sistema, sin que todo ello comprometa la estabilidad del sistema en general.

## Los Servicios API

Actualmente los servicios que proporcionan las API moderna son muy amplios. Como tal, el desempe√±o de una API debe cumplir ciertos est√°ndares operativos y, a su vez, tiene que ofrecer un servicio robusto y eficaz. Por lo tanto, el desarrollo de una API resulta indispensable a√±adir todos estos puntos clave si se pretende obtener alta performance y seguridad.

Las API RESTful ofrecen un conjunto de potencialidades muy convenientes y √∫tiles para m√∫ltiples prop√≥sitos. Es por esta raz√≥n que los servicios que proporcione una API tienen que hacer √©nfasis en el uso de sistemas m√°s robustos y flexibles a la vez. Las API RESTful son eficaces pero a veces podr√≠an resultar ser poco flexibles. Ello mismo ocurre en el momento de requerir de sus servicios para diversas aplicaciones, donde tan solo se requiere la parcialidad de los datos y no todos ellos.

En efecto, es aqu√≠ cuando entra en juego GraphQL. Gracias a la gran flexibilidad que posee GraphQL, nosotros podremos asegurarnos que nuestras API se conviertan en altamente flexibles a la hora de ser consumidas por las aplicaciones.

Adem√°s de las API RESTful tambi√©n contamos con otro tipo de tecnolog√≠as, tales como gRPC. Si bien, este servicio hace uso de un protocolo particular y es algo anterior a las API, no deja de ser un prototipo de servicio muy interesante. De hecho, los primeros servicios ofrecidos a terceros, conocidos como ‚Äúcontratos‚Äù, se desarrollaron en gRPC. La gran ventaja de gRPC es que nos ofrece un sistema muy flexible, sencillo y muy seguro. Adem√°s posee un servicio que resulta ser bastante liviano, lo cual lo convierte en favorito para diversos servicios donde se requiere de mayor respuesta de velocidad y carga. Por sobre los microservicios, gRPC se comporta de forma muy satisfactoria y es por ello que muchos optan por su uso.

Por √∫ltimo, ante el uso de una arquitectura basada en microservicios, el uso de los llamados API Gateway resultan cruciales. API Gateway se trata de un puerto de enlace y cuya finalidad es la de gestionar todas las solicitudes y respuestas dentro del contexto de la soluci√≥n, con el objeto de resolver las rutas que apuntan a cada uno de los microservicios internos de forma apropiada. Uno de los productos m√°s utilizados en el mercado es Ocelot. Sin embargo, tambi√©n existen otros productos similares a este.

En este libro aprender√°s c√≥mo se dise√±an e implementan todas estas funcionalidades. Conocer√°s el uso de la gesti√≥n de rutas, pol√≠ticas de seguridad y, lo m√°s importante de todo, c√≥mo se configura y usa el balanceo de carga de los datos. Tambi√©n el uso de limitadores para evitar los ataques DDoS (*Disdtributed Denial on Service*) o ataques de denegaci√≥n de servicios distribuidos.

## Gesti√≥n de Fuentes de Datos

Uno de los recursos m√°s importantes que poseen tanto las empresas como las instituciones en general es sin duda alguna sus datos. Garantizar que la informaci√≥n se encuentre de forma segura y disponible es fundamental. Por otro lado, disponer de los datos cuando sea necesario de forma inmediata y segura es un requisito indispensable.

Para poder obtener la mejor performance respecto a la provisi√≥n, persistencia y redundancia de los datos se requiere de sistemas seguros y robustos. En efecto, el uso de los motores ORM (*Object-Relational Mapping*) nos permiten garantizar todos esos procesos. Nativamente, la plataforma de Microsoft .NET Core tiene una soluci√≥n ORM llamada Entity Framework Core. Gracias a esta valiosa herramienta, las aplicaciones y servicios que hacen uso de su disponibilidad permiten la gesti√≥n de fuentes de datos de forma fiable y robusta.

Otra caracter√≠stica destacable de Entity Framework Core es la de ofrecer la posibilidad de trabajar con distintos tipos de proveedores de datos. Esta caracter√≠stica resulta interesante porque nos permite adaptar muy f√°cilmente nuestros sistemas en caso de tener que migrar de entre gestores de base de datos. Obviamente, este proceso es acompa√±ado de su proveedor de datos apropiado.

Por otra parte, la tecnolog√≠a de Microsoft .NET Core es la de ofrecernos una herramienta llamada Dapper que nos permite gestionar datos como una suerte de micro motor ORM. Tal cual sucede con Entity Framework, Dapper tambi√©n permite la interacci√≥n con las bases o fuentes de datos.

Si bien, existen bases de datos de tipo relacionales, tal cual he mencionado recientemente que pueden ser gestionadas desde Dapper o Entity Framework Core, tambi√©n existen otros tipos de or√≠genes de datos que no son relacionales. Las bases o fuentes de datos de tipo ‚Äú*no relacionales*‚Äù son gestionadas en el entorno de Microsoft .NET Core aunque se dispone del uso de otros tipos de m√≥dulos o librer√≠as de terceros para su gesti√≥n. Por ejemplo, el tipo de base de datos como NoSQL, MongoDB o CosmoDB, este √∫ltimo de la firma de Microsoft, es gestionada a trav√©s de desarrollos de terceros. Un ejemplo de ello es Redis.

Por lo tanto, garantizar una verdadera redundancia de los datos implica el uso combinado de tipos de bases de datos relacionales y no relacionales. Esto lo analizaremos en detalles en posteriores cap√≠tulos de este libro. Por ahora, en esta breve introducci√≥n, solo nos quedaremos con los conceptos fundamentales de que ambos prototipos de bases de datos y sus sistemas de gesti√≥n, pueden ser aplicados muy convenientemente para obtener resultados extraordinarios.

## Despliegue y Mantenimiento de Microservicios

Una caracter√≠stica crucial de un sistema es que se pueda desplegar f√°cilmente y, por otro lado, se pueda mantener libre de complejidades adicionales. En efecto, el despliegue eficiente y el mantenimiento de microservicios es un tema central.

Actualmente la tecnolog√≠a nos permite muy f√°cilmente trabajar con los despliegues en los ambientes de producci√≥n. La llamada ‚Äú*Filosof√≠a DevOps o tambi√©n, DevSecOps*‚Äù permite cumplir tal prop√≥sito de forma eficaz, √°gil, r√°pida y con muy bajos costos operativos. La terminolog√≠a DevOps (*Development/Operations*) hace referencia a ‚Äú*Desarrollo y Operaciones*‚Äù y, para el caso de DevSecOps, hace referencia a ‚Äú*Desarrollo, Seguridad y Operaciones*‚Äù.

En el pasado los despliegues se deb√≠an hacer totalmente a mano. Estos despliegues consist√≠an primero en compilar la soluci√≥n o proyecto. Luego, desplegar todos los archivos dentro del servidor contenedor. Sobre la marcha de estas tareas triviales, tambi√©n se ten√≠a que configurar toda clase de par√°metros determinados, de modo de ajustar la aplicaci√≥n en el ambiente de producci√≥n correctamente.

Todas estas tareas consumaban ciertas dificultades. Adem√°s, podr√≠an ser riesgosas porque un despliegue mal hecho podr√≠a crear severos problemas a los sistemas en general. Todo esto tambi√©n imprim√≠a cierta p√©rdida de tiempo, la programaci√≥n para la detenci√≥n del sitio Web, etc.

Todas estas dificultades hac√≠an que los procesos no fuesen demasiados pr√°cticos y seguros. Por ejemplo, si un cliente estaba visitando la p√°gina de la empresa comprando algunos productos en la tienda virtual o quiz√°, pagando alg√∫n tipo de servicio que consume de la empresa y, en ese momento se planificaba un despliegue, el mero proceso de detener al servidor Web, era m√°s que suficiente para que se produzcan p√©rdidas e inconsistencia de datos, lo cual eso se traducir√≠a directamente en perjuicio del cliente o de la empresa proveedora.

Gracias a la moderna tecnolog√≠a todas estas tareas dejan de tener efecto. Todas ellas pasan a ser reemplazadas y gestionadas por soluciones m√°s pr√°cticas y eficaces. Por ejemplo, el uso de Docker o Kubernetes para su gesti√≥n.

Tanto Docker como Kubernetes se tratan de m√°quinas virtuales que gestionan contenedores. Los contenedores nos permiten desplegar nuestras aplicaciones sobre una plataforma, basadas como por ejemplo, en un tipo de versionado de Framework en particular, un sistema operativo determinado, etc. Los procesos que se llevan a cabo son instalados sobre los contenedores, ajustados por el orquestador de procesos de los gestores de Docker o Kubernetes, seg√∫n el tipo de producto de contenedor que se est√© utilizando. Luego, el proceso de despliegue har√° diversos tipos de tareas internas, como por ejemplo, compilar la aplicaci√≥n, someter el producto a diversos tipos de pruebas programadas dentro del contexto del pipeline. Finalmente, se realizar√° el despliegue y configuraci√≥n autom√°tica de la aplicaci√≥n o el producto de software en el servidor Web operativo.

Una de las herramientas utilizadas dentro de un proceso de pipeline es OpenTelemetry. Esta herramienta sirve para poder hacer seguimientos y monitoreo de cada una de las tareas llevadas a cabo por el orquestador de procesos. De forma visual podremos ir siguiendo cada uno de los pasos del orquestador. Ello significa que si durante todo el gran proceso se produce un error, m√°s tarde podremos observarlo en pantalla. Esto es muy importante porque podr√≠amos detener todas las tareas llevadas a cabo hasta ese momento. Luego, el orquestador har√° un rollback para deshacer todos los cambios que se han hecho hasta el momento. Este proceso de deshacer la tarea evita que se produzcan colapsos, errores e inconsistencia de los datos. 
Por √∫ltimo y no menos importante, el uso de Polly tiene como fundamental ventaja la de crear un marco operacional mucho m√°s fiable y eficaz, ofreciendo un alto grado de resiliencia. Los patrones de resiliencia como circuit, breakers y retries resultan importante para el manejo y ajuste apropiado de las orquestaciones en los contenedores. Luego, todos ellos nos permitir√°n muy f√°cilmente seguir los procesos de monitoreos. Estos ser√°n primordiales para los posteriores procesos de depuraci√≥n en el ambiente de producci√≥n. El objetivo es el potencial de b√∫squeda de problemas o simplemente en la observaci√≥n de su comportamiento.

## Procesos para la Seguridad Operacional y Funcional

Cuando se menciona la terminolog√≠a de ‚Äú*seguridad*‚Äù, resulta importante primero hacer la pregunta; ¬øa qu√© tipo de seguridad nos referimos? No es lo mismo la seguridad operativa de un sistema que la seguridad funcional y ni mucho menos, la seguridad para el sistema, en caso de un mal manejo de parte de un humano o un robot. Por ejemplo, t√∫ puedes tener un programa muy seguro pero si su operador es torpe o hace un manejo intencionalmente malicioso de su aplicaci√≥n, all√≠ tambi√©n podr√≠amos considerar un caso de problema de inseguridad. Por lo tanto y en resumen, la seguridad no puede solamente ce√±irse a los procesos mec√°nicos de nuestra aplicaci√≥n. Todo lo contrario, va m√°s all√° de todo ello.

En lo que concierne la seguridad, analiz√°ndolo desde el punto de vista de los sistemas, aplicar una normalizaci√≥n para garantizar la seguridad funcional de un sistema es crucial. Las empresas pierden millones de d√≥lares cuando son atacadas por la ciberdelincuencia.

Por lo tanto, la seguridad para las empresas de sus sistemas no es un caso menor. Para ello actualmente contamos con muchos modelos y sistemas que nos ayuden a mitigar los problemas de seguridad en general. El uso de mecanismos de seguridad para evitar que se robe o altere informaci√≥n es clave para evitar males mayores.

En este libro haremos un estudio pormenorizado de lo que son los procesos de Autorizaci√≥n y Autenticaci√≥n, c√≥mo utilizarlos eficaz y eficientemente en nuestras aplicaciones o soluciones de software. Tambi√©n el uso de productos de terceros como lo es JWT (*JSON Web Token*), las soluciones que propone OAuth2 y tambi√©n, OpenID Connect. Todos estos procesos de seguridad estar√≠an planificados para ser utilizados en toda clase de soluciones o aplicaciones. En este libro estudiaremos varios casos que describen c√≥mo se los utiliza, configura e implementa cada uno de ellos.

## Procesos de Pruebas, Optimizaci√≥n y CI/CD

Para poder asegurarnos que nuestro producto de aplicaci√≥n o de servicio de software funcione adecuadamente se requiere de un proceso de pruebas. Cada empresa o instituci√≥n suele tener un departamento dedicado a los procesos de pruebas y que generalmente se lo conoce como QA (*Quality Assurance*) o Pruebas de Calidad.

Detr√°s de un departamento QA se suelen trazar toda clase de planificaciones para poder implementar un m√©todo eficiente para las pruebas. Sin embargo, todas estas pr√°cticas se pueden reducir pr√°cticamente a tres de ellas; Unit Test o ‚Äú*Pruebas Unitarias*‚Äù, Functional Test o ‚Äú*Pruebas Funcionales*‚Äù e Integrated Test o ‚Äú*Pruebas Integrales*‚Äù.

Adicionalmente a este tipo de pruebas tambi√©n contamos con otro tipo de pruebas m√°s profundas como lo son las llamadas Stress Test o ‚Äú*Pruebas de Estr√©s*‚Äù. Este tipo de pruebas suelen ser muy intensivas. Dentro de este proceso tambi√©n se suele incluir las pruebas de carga. En resumen, la idea es que el producto pueda resistir y funcionar bajo cualquier tipo de escenario problem√°tico. B√°sicamente, es la medici√≥n bajo las peores condiciones.

Microsoft .NET Core nos ofrece una serie de herramientas muy interesantes que nos ayudan a cubrir muchos de estos procesos muy eficazmente. Tambi√©n existen otras herramientas creadas por terceras partes que se pueden utilizar muy convenientemente en nuestros proyectos. Por ejemplo, contamos con herramientas tales como XUnit, MSTest y Moq, por citar algunos ejemplos.

Los procesos que se orquestan durante los despliegues automatizados hacen uso de todas estas bater√≠as de pruebas. Los procesos CI/CD (*Continuos Integration/Continuous Deployment*) o en espa√±ol ‚Äú*Integraci√≥n Continua/Despliegue Continuo*‚Äù, permiten que esta orquestaci√≥n se puedan realizar muy convenientemente. Adem√°s, como estas tareas instrumentan otros tipos de m√©tricas, en todo su conjunto, las operaciones generales pueden otorgar un proceso de confiabilidad muy elevado. Todo este tipo de procesos se pueden orquestar desde repositorios, tales como GitHub o GitLab hasta en los procesos que se encuentran disponibles en las nubes de Microsoft Azure. La integraci√≥n de ambos procesos es desarrollada y planificada a trav√©s de la estrategia que ya he mencionado en otro apartado de este cap√≠tulo bajo el nombre de DevOps (*Development/Operations*) o ‚Äú*Desarrollo y Operaciones*‚Äù.

## Inteligencia Artificial Aplicada al √Åmbito del Desarrollo de Software

Uno de los grandes avances modernos es sin duda alguna la AI (*Artificial Intelligense*) o ‚Äú*Inteligencia Artificial*‚Äù. Actualmente existen muchos sistemas basados en inteligencia artificial como por ejemplo ChatGPT, Copilot, Gemini, etc. Por ejemplo, el entorno de desarrollo de Microsoft Visual Studio 2022 proporciona la integraci√≥n de la herramienta Copilot para el uso asistido mediante la inteligencia artificial. Esta herramienta resulta indispensable dado que otorga capacidades extraordinarias para el trabajo y desarrollo de los profesionales.

Por otro lado, la plataforma propia de Microsoft .NET Core nos ofrece una serie de librer√≠as muy interesantes para desarrollar aplicaciones basadas en inteligencia artificial. El enfoque para Machine Learning puede llevarse a cabo mediante el uso de la librer√≠a ML.NET. Gracias a esta poderosa librer√≠a podremos construir aplicaciones que pueden aprovechar al m√°ximo muchos de los tipos de algoritmos utilizados para la inteligencia artificial en nuestros propios proyectos. Por ejemplo, los algoritmos de Machine Learning tales como la regresi√≥n, clasificaci√≥n y clustering podr√≠an ser muy bien aprovechados en los diversos tipos de servicios y aplicaciones generales de nuestros proyectos.

Un buen ejemplo del uso de inteligencia artificial disponible es Azure Cognitive Services que es espec√≠ficamente utilizado para el reconocimiento facial, el procesamiento de texto y el an√°lisis de voz.

Por √∫ltimo, con las diversas herramientas disponibles que nos ofrece la inteligencia artificial, podremos construir poderosos chatbots empresariales mediante la asistencia del sistema LUIS de Azure. En breve, las posibilidades que nos otorga este tipo de herramientas son pr√°cticamente ilimitadas. 
Desaf√≠os para las Soluciones Empresariales Reales

Quiz√° uno de los retos m√°s importantes es la de poder reunir todos los recursos necesarios y apropiados para la resoluci√≥n de los diversos problemas complejos que nos topamos en lo cotidiano. Las empresas e instituciones se encuentran bajo un escenario de permanente de desaf√≠os, con el objeto de resolver diversos tipos de problemas y tambi√©n, la forma de seguir creciendo. El desarrollo del software de cara al acompa√±amiento y resoluci√≥n de problemas empresariales tambi√©n asume sus propios retos.

En este libro he de plasmar varios ejemplos de la vida real. El objetivo fundamental es el de poder comprender y profundizar mejor c√≥mo aprovechar todos los recursos disponibles aplicados sobre un enfoque resolutivo para todo tipo de problemas que presenta el mundo industrial y empresarial.

Como cap√≠tulo final para este libro voy a dar un ejemplo aplicativo al mundo empresarial real. All√≠ podremos explorar muchos de los desaf√≠os que nos plantean el mundo cotidiano y la forma en c√≥mo resolver sus diversos problemas planteados. Para ello el ejemplo se basar√° principalmente de un proceso arquitect√≥nico que nos ayude a cubrir todas las necesidades planteadas por el mundo empresarial.

Todo este conjunto de procesos combinar√° todos los conocimientos adquiridos, desde la arquitectura de microservicios, pasando por la integraci√≥n de la inteligencia artificial, hasta el despliegue y monitoreo en la nube. Este proyecto final te permitir√° aplicar todos los conceptos en un escenario real y prepararte para implementar soluciones robustas y escalables en tus futuros proyectos.

------------
El Cap√≠tulo 1 lo he regalado para t√≠. Muchas gracias por leer y espero que haya gustado. üòä

Si deseas comprar el libro o deseas donar aqu√≠ dejo los enlaces:

‚ù§ [Donar PayPal](https://www.paypal.com/donate/?hosted_button_id=XVFHQVKGHPBBC "Donar PayPal")


üõíüìò [Comprar Libro](https://www.lulu.com/shop/ariel-alejandro-wagner/el-arte-del-desarrollo-empresarial-con-net-core/ebook/product-e75nr9j.html?page=1&fbclid=IwY2xjawH_hZRleHRuA2FlbQIxMAABHdKsTKXqd0BOPzYxhAfKK02qUfqmYgS2QFngievJcCq1piDEdV40Kw3TDQ_aem_uTgcvHLbump1_ljh9ZxLsg&pageSize=4&source=user_about----------------------10ff0a47ac49---------------------- "Comprar Libro")
